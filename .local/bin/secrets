#! /usr/bin/env bash
set -e

function mount_secrets() {
	sudo cryptsetup open /dev/disk/by-label/SECRETS secrets
	sudo mount /mnt/secrets
}

function unmount_secrets() {
	sudo umount /mnt/secrets
	sudo cryptsetup close secrets
}

case "$1" in
	mount) mount_secrets ;;
	umount) unmount_secrets ;;
	*)
		echo "usage $0 <mount | umount>"
		exit 1
esac
